(function(){"use strict";/**
 * @copyright   (C) 2018 Open Source Matters, Inc. <https://www.joomla.org>
 * @license     GNU General Public License version 2 or later; see LICENSE.txt
 */var k=function(){function s(c){var e=this;this.tableEl=c,this.formEl=c.closest("form"),this.rowSelector='tr[class^="row"]',this.boxSelector='input[type="checkbox"][name="cid[]"]',this.checkallToggle=this.tableEl.querySelector('[name="checkall-toggle"]'),this.prevRow=null,this.tableEl.addEventListener("click",function(t){t.target.closest(e.rowSelector)&&e.onRowClick(t)}),this.checkallToggle&&this.checkallToggle.addEventListener("click",function(t){var o=t.target,g=o.checked;e.getRows().forEach(function(l){e.changeBg(l,g)})})}var i=s.prototype;return i.getRows=function(){return Array.from(this.tableEl.querySelectorAll(this.rowSelector))},i.changeBg=function(e,t){e.classList.toggle("row-selected",t)},i.onRowClick=function(e){var t=this,o=e.target,g=e.shiftKey;if(!o.closest("a, button, input, select, textarea, details, dialog, audio, video")){var l=o.closest(this.rowSelector),a=o.matches(this.boxSelector)?o:l.querySelector(this.boxSelector);if(a){var r=a!==o?!a.checked:a.checked;if(r!==a.checked&&(a.checked=r,Joomla.isChecked(r,this.formEl)),this.changeBg(l,r),g&&this.prevRow){document.getSelection().removeAllRanges();var u=this.getRows(),n=u.indexOf(this.prevRow),h=u.indexOf(l);if(n>=0&&h>=0&&Math.abs(n-h)>1){var m=n<h?u.slice(n,h+1):u.slice(h,n+1);m.forEach(function(f){if(f!==l){var v=f.querySelector(t.boxSelector);v&&v.checked!==r&&(v.checked=r,t.changeBg(f,r),Joomla.isChecked(r,t.formEl))}})}}this.prevRow=l}}},s}(),d=function(i){var c="#adminForm",e=window.Joomla?Joomla.getOptions("js-multiselect",{}).formName:"";if(e){var t=e[0];c=t!=="."&&t!=="#"?"#"+e:e}i.querySelectorAll(c).forEach(function(o){o&&!("multiselect"in o.dataset)&&(o.dataset.multiselect="",new k(o))})};d(document),document.addEventListener("joomla:updated",function(s){var i=s.target;return d(i)})})();
